
# PowerTS (TSLib-like) — Hourly Power Forecasting Framework

A lightweight, **TSLib-inspired** time series forecasting framework for the dataset schema:

- `user_id` (categorical / integer)
- `ds` (timestamp at hourly granularity)
- `temp` (ambient temperature feature)
- `y` (power consumption)

## Features

- **Data preprocessing**: parsing, sorting, per-user grouping, missing-hour filling, normalization.
- **Dataset & Dataloader**: sliding window with covariates.
- **Models**:
  - `DLinear` (decomposition-based linear) — minimalist implementation following Zeng et al. 2023.
  - `TSMixer` (MLP-mixer along time & feature dims).
  - `TimesFMZeroShot` **interface** (opt-in): simple wrapper so you can plug a foundation model like **TimesFM** later. In this repo it falls back to a seasonal naïve baseline so the pipeline always runs offline.
- **Trainer**: early-stop free, simple train/valid loop with MSE/MAE.
- **Reproducible example**: synthetic multi-user power dataset with temperature and daily/weekly seasonality.

> This repo **mimics** the structure and config-driven spirit of [THUML's Time-Series-Library] but is intentionally tiny for clarity.

## Quickstart

```bash
# 1) (optional) create a venv; requires Python >=3.9 and PyTorch installed
pip install -r requirements.txt

# 2) make sample data
python scripts/simulate_data.py --out data/power_sample.csv --n_users 10 --days 30

# 3) run a tiny training demo (DLinear)
python run.py --model dlinear --data data/power_sample.csv --pred_len 24 --seq_len 96 --epochs 3

# 4) try TSMixer
python run.py --model tsmixer --data data/power_sample.csv --pred_len 24 --seq_len 96 --epochs 3

# 5) try TimesFM-style interface (offline fallback -> seasonal naïve)
python run.py --model timesfm --data data/power_sample.csv --pred_len 24 --seq_len 96
```

## Notes on Models & References

- **DLinear** (Are Transformers Effective for Time Series Forecasting? AAAI'23) — Official impl: `vivva/DLinear` on GitHub.
- **TSMixer** (All-MLP architecture) — see arXiv:2303.06053 and openreview.
- **Foundation models** for time series (e.g., **TimesFM**, **Lag-Llama**) can be wrapped via `TimesFMZeroShot` here.

## Cite/Read
- DLinear: Zeng et al., “Are Transformers Effective for Time Series Forecasting?”, AAAI 2023.
- TSMixer: Chen et al., “TSMixer: An All-MLP Architecture for Time Series Forecasting”, 2023.
- THUML **Time-Series-Library** (TSLib).
- TimesFM: Google Research, “A decoder-only foundation model for time-series forecasting”, ICML 2024.
- Lag-Llama: Time-series foundation models (open-source).

---

**Structure**
```
PowerTS/
  README.md
  requirements.txt
  run.py
  configs/
    example.yaml
  data/
    power_sample.csv  (generated by simulate_data.py)
  scripts/
    simulate_data.py
  powerts/
    __init__.py
    preprocessing/pipeline.py
    data/dataset.py
    models/dlinear.py
    models/tsmixer.py
    models/timesfm_zero.py
    trainer/train.py
    utils/metrics.py
    utils/common.py
```
